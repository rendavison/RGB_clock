<!DOCTYPE HTML>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1">

        <!-- INSERT FAVICON HERE WHEN IT EXISTS -->

        <!--IMPORT MAIN STYLESHEET-->
        <link rel="stylesheet" type="text/css" href="css/style.css">

        <!--IMPORT FONTS FROM TYPEKIT-->
        <link rel="stylesheet" href="https://use.typekit.net/fpg4qcy.css">

        <title>RGB Clock</title>
        <script type="text/javascript">
          function padWithZeros(s) { return (s < 10 ? "0" : "") + s; }

          function get12H()
          {
            var now = new Date();
            var hh = now.getHours();
            var mm = padWithZeros(now.getMinutes());
            var ss = padWithZeros(now.getSeconds());

            var ampm = hh < 12 ? "AM" : "PM";

            // subtract 12 from PM times, but turn 0 into 12.
            var hh = hh > 12 ? hh - 12 : (hh == 0 ? 12 : hh);

            return hh + ":" + mm + ":" + ss + " " + ampm;
          }

          function get24H()
          {
            var now = new Date();
            var hh = now.getHours();
            var mm = padWithZeros(now.getMinutes());
            var ss = padWithZeros(now.getSeconds());

            return hh + ":" + mm + ":" + ss;
          }

          function updateClock()
          {
            var curTime = document.getElementById("24H").checked ? get24H() : get12H();

            document.getElementById('clock').innerHTML = curTime;
          }

          function scaleColor(x,n) { return Math.floor(x * 255 / n) }

          function updateColor()
          {
            var now = new Date();

            var hh = scaleColor(now.getHours(),   24);
            var mm = scaleColor(now.getMinutes(), 60);
            var ss = scaleColor(now.getSeconds(), 60);

            var rgbString = "rgb(" + hh + "," + mm + "," + ss +")";

            document.getElementById("clock").style.color = rgbString;
          }

          function update()
          {
            updateClock();
            updateColor();
          }

        </script>
    </head>

    <!--
      TODO:
        - make the RGB changing work
        - make the radio buttons less ugly
        - make the site remember if you want 12h or 24h between refreshes
        - add two RGB modes? 
            - one "classic" that jumps when 59 flips to 00
            - one "modern" that is smooth throughout the 24 hours
    -->

    <body onload="update(); setInterval('update()', 10);">
        <input type="radio" id="24H" name="clockType" value="24H" checked>
        <label for="24H">24 Hour</label>
        <input type="radio" id="12H" name="clockType" value="12H">
        <label for="12H">12 Hour</label>

        <div id="time">
          <h1 id="clock"></h1>
        </div>
    </body>
</html>
